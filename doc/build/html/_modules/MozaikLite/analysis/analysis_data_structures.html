

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MozaikLite.analysis.analysis_data_structures &mdash; MozaikLite 0.01 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.01',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MozaikLite 0.01 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">MozaikLite 0.01 documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for MozaikLite.analysis.analysis_data_structures</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">MozaikLite.stimuli.stimulus_generator</span> <span class="kn">import</span> <span class="n">parse_stimuls_id</span>

<div class="viewcode-block" id="AnalysisDataStructure"><a class="viewcode-back" href="../../../index.html#MozaikLite.analysis.analysis_data_structures.AnalysisDataStructure">[docs]</a><span class="k">class</span> <span class="nc">AnalysisDataStructure</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
      <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      AnalysisDataStructure encupsulates data that a certain Analysis class generates</span>
<span class="sd">      A analysis class can generate several AnalysisDataStructure&#39;s and one AnalysisDataStructure</span>
<span class="sd">      can be generated by several Analysis classes</span>
<span class="sd">      the goal is to offer a common interface of such data for plotting </span>
<span class="sd">      i.e. many analysis can generate 2D tuning curves of several kinds but they all</span>
<span class="sd">      share common data structure and can be plotted in a common way</span>
<span class="sd">      </span>
<span class="sd">      identifier - </span>
<span class="sd">          An important parameter of each AnalysisDataStructure is identifier which is used to </span>
<span class="sd">          identify data structures of common type in storage facilities</span>
<span class="sd">          Currently differnt datastructures with common interface should share the identifiers</span>
<span class="sd">          but it is not clear this is needed. If it turns out such sharing is not neccessary it </span>
<span class="sd">          might be abolised and there will be one-to-one mapping between AnalysisDataStructure classes</span>
<span class="sd">          and identifiers</span>
<span class="sd">      </span>
<span class="sd">      tags - </span>
<span class="sd">          Often it might be difficult to design a filter to extract the right set of recordings or analysis </span>
<span class="sd">          data structures for a given analysis or visualization. For example it might be possible that many </span>
<span class="sd">          types of analysis will produce the same AnalysisDataStructure but you want to plot only those</span>
<span class="sd">          produced from one specific one in a single figure. It might be difficult or impossible to write </span>
<span class="sd">          a filter that picks only the right one. On the other hand we do not want users to define multiple </span>
<span class="sd">          AnalysisDataStructures that hold the same kind of data only to be able to tell them appart.</span>
<span class="sd">                  </span>
<span class="sd">          Therefore we also allow all analysis data stuctures to contain a list of tags</span>
<span class="sd">          (which are strings) that one can add during their creation (or later) and use </span>
<span class="sd">          them to later for their identification in DataStore.</span>
<span class="sd">          </span>
<span class="sd">          However, in general, we encourage users to use filter methods rather that tags to perform their</span>
<span class="sd">          plotting/analysis whenever possible!!!!</span>
<span class="sd">      &quot;&quot;&quot;</span>
      <span class="n">identifier</span> <span class="o">=</span> <span class="bp">None</span>
      <span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>
      
      <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tags</span><span class="o">=</span><span class="p">[]):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="n">tags</span>      

          </div>
<div class="viewcode-block" id="TuningCurve"><a class="viewcode-back" href="../../../index.html#MozaikLite.analysis.analysis_data_structures.TuningCurve">[docs]</a><span class="k">class</span> <span class="nc">TuningCurve</span><span class="p">(</span><span class="n">AnalysisDataStructure</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">             Tuning curve holds data of a tuning curves with respect to a certain paramter of a stimulus</span>
<span class="sd">             It is assumed that all other paramters are either: </span>
<span class="sd">              * collpased (i.e. they have been averaged out such as phase or trials in case of orientation tuning)</span>
<span class="sd">              * those that are unclopased should be tread as the paramters of </span>
<span class="sd">                the tuning curve (i.e. orientation tuning curves taken at different contrasts)</span>
<span class="sd">            </span>
<span class="sd">             sheet_name - in which sheet the data were recorded</span>
<span class="sd">             values     - is a list of lists, members of the outer list correspond </span>
<span class="sd">                          to the value of the tuning curve for a stimulus at the same position in the stimuli_ids</span>
<span class="sd">                          the inner lists contain the actual values for the measured neurons</span>
<span class="sd">             stimuli_ids - see values description</span>
<span class="sd">             parameter_index - the parameter position in the stimulus id against which the tuning curve was computed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">identifier</span> <span class="o">=</span> <span class="s">&#39;TuningCurve&#39;</span>
        
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="n">stimuli_ids</span><span class="p">,</span><span class="n">parameter_index</span><span class="p">,</span><span class="n">sheet_name</span><span class="p">,</span><span class="n">tags</span><span class="o">=</span><span class="p">[]):</span>
            <span class="n">AnalysisDataStructure</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tags</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sheet_name</span> <span class="o">=</span> <span class="n">sheet_name</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">values</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stimuli_ids</span> <span class="o">=</span> <span class="n">stimuli_ids</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parameter_index</span> <span class="o">=</span> <span class="n">parameter_index</span>

<div class="viewcode-block" id="TuningCurve.to_dictonary_of_tc_parametrization"><a class="viewcode-back" href="../../../index.html#MozaikLite.analysis.analysis_data_structures.TuningCurve.to_dictonary_of_tc_parametrization">[docs]</a>        <span class="k">def</span> <span class="nf">to_dictonary_of_tc_parametrization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c"># creat dictionary where stimulus_id indexes all the different </span>
            <span class="c"># values and corresponding data for the given </span>
            <span class="c"># neurons throught the range of the paramter against which the tuning curve was computed</span>
            <span class="c"># this groups the data according to the the individual tuning curves to be plotted, each</span>
            <span class="c"># corresponding to different parametrization (ie. contrast for orientation tuning)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">stimuli_ids</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">parse_stimuls_id</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_index</span><span class="p">]</span>
                <span class="n">s</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter_index</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;x&#39;</span>
                
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
                   <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span> 
                   <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                   <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>  <span class="o">=</span> <span class="p">([</span><span class="n">v</span><span class="p">],[</span><span class="n">val</span><span class="p">])</span> 
            
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">:</span>
                <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">b</span><span class="p">)</span>
            
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>
</div></div>
<div class="viewcode-block" id="AnalogSignalList"><a class="viewcode-back" href="../../../index.html#MozaikLite.analysis.analysis_data_structures.AnalogSignalList">[docs]</a><span class="k">class</span> <span class="nc">AnalogSignalList</span><span class="p">(</span><span class="n">AnalysisDataStructure</span><span class="p">):</span>
       <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         This is a simple list of Neurotools AnalogSignal objects</span>

<span class="sd">         sheet_name - in which sheet the data were recorded</span>
<span class="sd">         asl - the variable containing the list of AnalogSignal objects, in the order corresponding to the </span>
<span class="sd">                   order of neurons indexes in the indexes parameter</span>
<span class="sd">         indexes - list of indexes of neurons in the original Mozaik sheet to which the AnalogSignals correspond</span>
<span class="sd">       &quot;&quot;&quot;</span>
       <span class="n">identifier</span> <span class="o">=</span> <span class="s">&#39;AnalogSignalList&#39;</span>
        
       <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">asl</span><span class="p">,</span><span class="n">sheet_name</span><span class="p">,</span><span class="n">indexes</span><span class="p">,</span><span class="n">tags</span><span class="o">=</span><span class="p">[]):</span>
           <span class="n">AnalysisDataStructure</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tags</span><span class="p">)</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">sheet_name</span> <span class="o">=</span> <span class="n">sheet_name</span>    
           <span class="bp">self</span><span class="o">.</span><span class="n">asl</span> <span class="o">=</span> <span class="n">asl</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">indexes</span> <span class="o">=</span> <span class="n">indexes</span>
</div>
<div class="viewcode-block" id="ConductanceSignalList"><a class="viewcode-back" href="../../../index.html#MozaikLite.analysis.analysis_data_structures.ConductanceSignalList">[docs]</a><span class="k">class</span> <span class="nc">ConductanceSignalList</span><span class="p">(</span><span class="n">AnalysisDataStructure</span><span class="p">):</span>
       <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         This is a simple list of Neurotools AnalogSignal objects representing the conductances</span>
<span class="sd">         The object holds two lists, one for excitatory and one for inhibitory conductances</span>

<span class="sd">         sheet_name - in which sheet the data were recorded</span>
<span class="sd">         e_asl - the variable containing the list of AnalogSignal objects corresponding to excitatory conductances,</span>
<span class="sd">                 in the order corresponding to the order of neurons indexes in the indexes parameter</span>
<span class="sd">         i_asl - the variable containing the list of AnalogSignal objects corresponding to inhibitory conductances,</span>
<span class="sd">                 in the order corresponding to the order of neurons indexes in the indexes parameter</span>
<span class="sd">         indexes - list of indexes of neurons in the original Mozaik sheet to which the AnalogSignals correspond</span>
<span class="sd">       &quot;&quot;&quot;</span>
       <span class="n">identifier</span> <span class="o">=</span> <span class="s">&#39;ConductanceSignalList&#39;</span>
        
       <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">e_con</span><span class="p">,</span><span class="n">i_con</span><span class="p">,</span><span class="n">sheet_name</span><span class="p">,</span><span class="n">indexes</span><span class="p">,</span><span class="n">tags</span><span class="o">=</span><span class="p">[]):</span>
           <span class="n">AnalysisDataStructure</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tags</span><span class="p">)</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">sheet_name</span> <span class="o">=</span> <span class="n">sheet_name</span>    
           <span class="bp">self</span><span class="o">.</span><span class="n">e_con</span> <span class="o">=</span> <span class="n">e_con</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">i_con</span> <span class="o">=</span> <span class="n">i_con</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">indexes</span> <span class="o">=</span> <span class="n">indexes</span>

      
</div>
<div class="viewcode-block" id="NeurotoolsData"><a class="viewcode-back" href="../../../index.html#MozaikLite.analysis.analysis_data_structures.NeurotoolsData">[docs]</a><span class="k">class</span> <span class="nc">NeurotoolsData</span><span class="p">(</span><span class="n">AnalysisDataStructure</span><span class="p">):</span>
      <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      Turn the recordings into Neurotools data structures that can than be visualized </span>
<span class="sd">      via numerous Neurotools analysis tools</span>
<span class="sd">      &quot;&quot;&quot;</span>
      
      <span class="n">identifier</span> <span class="o">=</span> <span class="s">&#39;NeurotoolsData&#39;</span>
      
      <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">spike_data_dict</span><span class="p">,</span><span class="n">vm_data_dict</span><span class="p">,</span><span class="n">g_syn_e_data_dict</span><span class="p">,</span><span class="n">g_syn_i_data_dict</span><span class="p">,</span><span class="n">tags</span><span class="o">=</span><span class="p">[]):</span>
          <span class="n">AnalysisDataStructure</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tags</span><span class="p">)</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">vm_data_dict</span> <span class="o">=</span> <span class="n">vm_data_dict</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">g_syn_e_data_dict</span> <span class="o">=</span> <span class="n">g_syn_e_data_dict</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">g_syn_i_data_dict</span> <span class="o">=</span> <span class="n">g_syn_i_data_dict</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">spike_data_dict</span> <span class="o">=</span> <span class="n">spike_data_dict</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">MozaikLite 0.01 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Jan Antolik.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>